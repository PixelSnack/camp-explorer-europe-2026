@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --radius: 0.5rem;
}

/* Mobile-first optimizations */
@layer utilities {
  /* Ensure minimum touch target sizes for mobile accessibility (48px for iPhone 15) */
  .touch-target {
    min-height: 48px;
    min-width: 48px;
  }
  
  /* Prevent zoom on input focus for iOS */
  @media screen and (max-width: 768px) {
    input[type="text"],
    input[type="search"],
    select,
    textarea {
      font-size: 16px;
    }
  }
  
  /* Improve mobile scrolling performance */
  .smooth-scroll {
    -webkit-overflow-scrolling: touch;
  }
  
  /* Better mobile button interactions */
  .mobile-button {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
    touch-action: manipulation;
  }
  
  /* Prevent horizontal scroll and viewport instability */
  .mobile-stable {
    overflow-x: clip; /* Modern alternative to hidden that doesn't break sticky */
    width: 100%;
    max-width: 100vw;
  }
  
  /* Enhanced mobile navigation */
  .mobile-nav-enhanced {
    backdrop-filter: blur(10px);
    background-color: rgba(255, 255, 255, 0.95);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }
  
  /* Sticky header following 2025 best practices */
  .sticky-header {
    position: sticky;
    top: 0;
    height: 56px; /* Mobile-first height */
    z-index: 1000;
    background-color: white;
    border-bottom: 1px solid #e5e7eb;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
    width: 100%;
  }
  
  /* Desktop header height */
  @media (min-width: 640px) {
    .sticky-header {
      height: 64px;
    }
  }
  
  
  /* Advanced Mobile Adaptations for iOS/Android 2025 */
  .sticky-header {
    /* iOS Safe Area Support */
    padding-top: env(safe-area-inset-top);
    padding-left: env(safe-area-inset-left);  
    padding-right: env(safe-area-inset-right);
  }
  
  @supports (-webkit-touch-callout: none) {
    /* iOS-specific optimizations */
    .ios-scroll-fix {
      -webkit-overflow-scrolling: touch;
      overflow-scrolling: touch;
    }
  }
  
  /* Android Chrome optimizations */
  @media screen and (max-width: 767px) {
    body {
      /* Prevent zoom on input focus */
      touch-action: manipulation;
      /* Better scrolling on Android */
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
    }
    
    /* Modern mobile input optimization */
    input, textarea, select {
      font-size: 16px; /* Prevent zoom on iOS */
    }
  }
  
  /* Safe area for PWA and full-screen experiences */
  .safe-area-content {
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
  
  /* Hero section with 2025 dynamic viewport height - solves mobile UI adaptation */
  .hero-full-height {
    /* Fallback for older browsers */
    height: calc(100vh - 56px); /* Account for mobile header height */
    min-height: 600px; /* Ensure minimum height on very short screens */
  }
  
  /* Desktop hero height accounting for larger header */
  @media (min-width: 640px) {
    .hero-full-height {
      height: calc(100vh - 64px); /* Account for desktop header height */
      min-height: 700px;
    }
  }
  
  /* Modern mobile browsers: Dynamic Viewport Height (90.57% support 2025) */
  @supports (height: 100dvh) {
    .hero-full-height {
      height: calc(100dvh - 56px - env(safe-area-inset-top)); /* Account for iOS safe area insets */
      min-height: 600px;
    }
    
    @media (min-width: 640px) {
      .hero-full-height {
        height: calc(100dvh - 64px - env(safe-area-inset-top)); /* Desktop with dynamic viewport (safe-area = 0) */
        min-height: 700px;
      }
    }
  }
  
  /* Alternative fallback using CSS Small Viewport Height for maximum compatibility */
  @supports (height: 100svh) and (not (height: 100dvh)) {
    .hero-full-height {
      height: calc(100svh - 56px - env(safe-area-inset-top)); /* Small viewport with safe area awareness */
      min-height: 600px;
    }
    
    @media (min-width: 640px) {
      .hero-full-height {
        height: calc(100svh - 64px - env(safe-area-inset-top));
        min-height: 700px;
      }
    }
  }

  /* Adaptive Hero Content Layout - Intelligent positioning instead of forced centering */
  .hero-adaptive-grid {
    display: grid;
    grid-template-rows: 1fr auto 1fr; /* Top space, content, bottom space */
    grid-template-columns: 1fr;
    align-items: start;
    justify-items: center;
    height: 100%;
    width: 100%;
    padding: 0;
    box-sizing: border-box;
  }
  
  /* Content positioning in the center grid area with smart spacing */
  .hero-adaptive-content {
    grid-row: 2;
    width: 100%;
    max-width: 1152px; /* max-w-6xl equivalent */
    margin: 0 auto;
    padding: clamp(1rem, 4vw, 2rem); /* Responsive padding that adapts to screen size */
    
    /* Ensure content never overflows available space */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    
    /* Safe zones for mobile devices */
    padding-top: clamp(2rem, 6vh, 4rem);
    padding-bottom: clamp(2rem, 6vh, 4rem);
  }
  
  /* Responsive spacing adjustments for different screen heights */
  @media (max-height: 700px) {
    .hero-adaptive-content {
      padding-top: clamp(1rem, 3vh, 2rem);
      padding-bottom: clamp(1rem, 3vh, 2rem);
    }
  }
  
  @media (min-height: 900px) {
    .hero-adaptive-content {
      padding-top: clamp(3rem, 8vh, 6rem);
      padding-bottom: clamp(3rem, 8vh, 6rem);
    }
  }
  
  /* Ultra-wide screens: prevent excessive spacing */
  @media (min-width: 1920px) and (min-height: 1200px) {
    .hero-adaptive-content {
      padding-top: clamp(4rem, 10vh, 8rem);
      padding-bottom: clamp(4rem, 10vh, 8rem);
    }
  }
  
  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}
